addField(selectedName: string) {
  const exists = this.fields.find(f => f.name === selectedName);
  if (exists) return;

  const jsonKey = this.fieldToJsonKey[selectedName];  // ✅ map properly
  this.fields.push({
    name: selectedName,
    value: [],
    unique: Math.floor(Math.random() * 200),
    constant: 151760,
    values: jsonKey ? this.getUniqueValues(jsonKey) : [], // ✅ load values
    checked: false,
    searchText: ''
  });

  setTimeout(() => {
    if (this.criteriaContainer) {
      this.criteriaContainer.nativeElement.scrollTop = this.criteriaContainer.nativeElement.scrollHeight;
    }
  });
}
